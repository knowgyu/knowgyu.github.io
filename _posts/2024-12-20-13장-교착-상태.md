---
title: "[혼공컴운] 13장 교착 상태"
author: knowgyu
description: "교착 상태의 개념과 해결 방법"
date: 2024-09-18 07:30:00 +0900
categories: [Computer Science, 혼자 공부하는 컴퓨터구조+운영체제]
tags: [교착 상태, 운영체제, 동기화]
---

# 13-1 교착 상태란

---

## 교착 상태의 개념

**교착 상태(Deadlock)**란 두 개 이상의 프로세스가 서로 상대방이 가진 **자원**을 기다리면서,  
더 이상 진행할 수 없는 **상태**를 의미합니다.

> 간단히 말해 프로세스들이 서로 **서로의 자원**을 기다리며 **막혀버리는 상태**입니다.  
{: .prompt-info }

---

## 식사하는 철학자 문제

**식사하는 철학자 문제**는 교착 상태를 설명하는 고전적인 예시입니다.

- **문제 상황**:  
  다섯 명의 철학자가 **원형 테이블**에 앉아 있으며, 각 철학자는 **왼쪽과 오른쪽의 포크**를 사용해 식사합니다.  
  만약, 모든 철학자가 왼쪽의 포크를 들고, 오른쪽의 포크를 사용하려 한다면 어느 누구도 식사를 할 수 없는 교착 상태가 발생할 수 있게 됩니다.

---

## 교착 상태 발생 조건

교착 상태가 발생하는 **4가지 조건**은 다음과 같습니다.

1. **상호 배제 (Mutual Exclusion)**  
   - 공유 자원을 **한 번에 하나의 프로세스만 사용할 수 있습니다**.  
   - 철학자 예시: **포크**는 한 명의 철학자만 사용할 수 있습니다.

2. **점유와 대기 (Hold and Wait)**  
   - 프로세스가 **이미 자원을 점유**한 상태에서 **다른 자원**을 기다립니다.  
   - 철학자 예시: 한 철학자가 **한쪽 포크**를 들고, 다른 쪽 포크를 기다리는 상태입니다.

3. **비선점 (No Preemption)**  
   - 다른 프로세스의 자원을 **강제로 빼앗을 수 없습니다**.  
   - 철학자 예시: 철학자는 다른 사람이 이미 사용 중인 포크를 **빼앗을 수 없습니다**.

4. **원형 대기 (Circular Wait)**  
   - 프로세스들이 서로 **순환적으로 자원**을 기다립니다.  
   - 철학자 예시: 포크를 **시계 방향**으로 순서대로 잡으려다 보면 **순환 대기** 상태가 됩니다.

> **교착 상태는 위 4가지 조건이 모두 만족될 때 발생합니다.**  
{: .prompt-danger }

---

# 13-2 교착 상태 해결 방법

---

## 교착 상태 해결 접근법

운영체제에서 교착 상태를 해결하는 방법은 크게 세 가지입니다.

1. **교착 상태 예방**  
2. **교착 상태 회피**  
3. **교착 상태 검출 후 회복**  

---

## 교착 상태 예방

**교착 상태 예방**은 교착 상태 발생 조건 4가지 중 **하나라도 제거**하는 방법입니다.

### 1. 점유와 대기 제거  

- 프로세스가 **모든 자원을 한꺼번에 할당**받도록 합니다.  
- 철학자 예시: **두 개의 포크를 동시에 잡거나**, **아무것도 잡지 않습니다**.  

> **단점**: 자원 활용률이 **낮아지며**, 많은 자원을 요구하는 프로세스가 자원을 할당받지 못하는 기아 상태가 발생할 수 있습니다.  
{: .prompt-warning }

---

### 2. 비선점 조건 제거  

- 자원을 점유한 프로세스에서 **강제로 자원을 빼앗을 수 있도록** 합니다.  
- **예시**: CPU는 선점이 가능하지만, 프린터 같은 자원은 빼앗기 어렵습니다.  

> **단점**: 모든 자원이 선점 가능한 것은 아니므로 범용성이 떨어집니다.  
{: .prompt-info }

---

### 3. 원형 대기 제거  

- 자원에 **순서를 부여**하고, 순서대로 자원을 할당합니다.  
- 철학자 예시: 포크에 번호를 붙이고, **낮은 번호부터 순서대로** 집게 합니다.

> **비유**: 원형 테이블 대신 **일렬 테이블**에 앉아 순서대로 식사하는 상황입니다.  
{: .prompt-tip }

---

## 교착 상태 회피

**교착 상태 회피**는 교착 상태를 **피하기 위해** 자원을 신중하게 할당하는 방법입니다.

- **안전 상태 (Safe State)**: 교착 상태가 발생하지 않고 **모든 프로세스가 종료될 수 있는 상태**입니다.  
- **불안전 상태 (Unsafe State)**: 교착 상태가 발생할 수 있는 상태입니다.  
- **안전 순서열**: 교착 상태 없이 프로세스에 자원을 할당할 수 있는 **순서**입니다.

---

### 예시

| **프로세스** | **최대 요구량** | **현재 사용량** | **남은 필요량** |
| ------------ | --------------- | --------------- | --------------- |
| P1           | 7               | 5               | 2               |
| P2           | 3               | 1               | 2               |
| P3           | 9               | 6               | 3               |

- 현재 자원이 충분하면, P2 → P1 → P3 순서로 할당할 수 있습니다.  
- 이 순서를 **안전 순서열**이라고 합니다.  

---

## 교착 상태 검출 후 회복

**교착 상태 검출**은 **주기적으로 상태를 검사**하고, 교착 상태가 발견되면 해결하는 방법입니다.

1. **선점을 통한 회복**  
   - 교착 상태를 해결하기 위해 **자원을 강제로 빼앗아** 특정 프로세스에 몰아줍니다.

2. **프로세스 강제 종료**  
   - 교착 상태에 있는 프로세스 중 일부를 **강제 종료**합니다.  
   - 가장 단순하면서 확실한 방법입니다.

> **단점**: 프로세스의 작업 내역이 손실되거나, **오버헤드**가 발생할 수 있습니다.  
{: .prompt-warning }

---

## 타조 알고리즘 (Ostrich Algorithm)

**타조 알고리즘**은 교착 상태를 **무시**하는 방법입니다.  
교착 상태가 발생해도 큰 문제가 없으면, **교착 상태를 해결하지 않는** 전략입니다.  

문제의 발생 빈도나 심각성에 따라 최대 효율을 추구하는 엔지니어 입장에서는 때때로 이 방식이 적합할 때도 많습니다.

> 타조가 위험이 발생해도 **머리를 모래에 박고** 무시하는 것과 비슷합니다.  
{: .prompt-tip }

---

> 위 내용은 한빛미디어의 "혼자 공부하는 컴퓨터 구조+운영체제" 교재를 학습하고 정리한 글입니다.  
{: .prompt-tip }
